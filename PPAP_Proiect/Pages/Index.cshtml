@page
@model IndexModel

@{
    string mesajSesiuneSucces = HttpContext.Session.GetString("mesajSucces");
    string mesajSesiuneEroare = HttpContext.Session.GetString("mesajEroare");

    if (!string.IsNullOrEmpty(mesajSesiuneSucces)) HttpContext.Session.Remove("mesajSucces");
    if (!string.IsNullOrEmpty(mesajSesiuneEroare)) HttpContext.Session.Remove("mesajEroare");

    string mesajSucces = mesajSesiuneSucces ?? Model.ModelState["mesajSucces"]?.Errors.FirstOrDefault()?.ErrorMessage;
    string mesajEroare = mesajSesiuneEroare ?? Model.ModelState["mesajEroare"]?.Errors.FirstOrDefault()?.ErrorMessage;
}
@if (Model.userCurent != null)
{
    <h2>Bine ai venit, @Model.userCurent.Nume @Model.userCurent.Prenume 👋</h2>
}
else
{
    <h2>Nu esti logat</h2>
}

@if (!string.IsNullOrEmpty(mesajSucces))
{
    <div style="background-color: #ecfdf5; border-left: 4px solid #10b981; padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; box-shadow: var(--shadow); display: flex; align-items: flex-start; gap: 1rem;">

        <div style="color: #10b981; font-size: 1.25rem; font-weight: bold; margin-top: -0.15rem;">
            ✓
        </div>

        <div style="flex: 1;">
            <strong style="color: #065f46; font-size: 1.05rem; display: block; margin-bottom: 0.25rem;">Acțiune finalizată</strong>
            <span style="color: #047857; font-size: 0.95rem; line-height: 1.4;">
                @mesajSucces
            </span>
        </div>

    </div>
}

@if (!string.IsNullOrEmpty(mesajEroare))
{
    <div style="background-color: #fef2f2; border-left: 4px solid var(--danger); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 1.5rem; box-shadow: var(--shadow); display: flex; align-items: flex-start; gap: 1rem;">

        <div style="color: var(--danger); font-size: 1.25rem; font-weight: bold; margin-top: -0.15rem;">
            ⚠️
        </div>

        <div style="flex: 1;">
            <strong style="color: #991b1b; font-size: 1.05rem; display: block; margin-bottom: 0.25rem;">A apărut o problemă</strong>
            <span style="color: #b91c1c; font-size: 0.95rem; line-height: 1.4;">
                @mesajEroare
            </span>
        </div>

    </div>
}

@if (Model.userCurent != null && Model.userCurent.ContVerificat == false)
{
    <div style="background-color: #fffbeb; border-left: 4px solid #f59e0b; padding: 1.5rem; border-radius: var(--radius); display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem; margin-bottom: 2rem; box-shadow: var(--shadow);">

        <div style="flex: 1; min-width: 250px;">
            <strong style="color: #b45309; font-size: 1.05rem; display: block; margin-bottom: 0.25rem;">Acțiune necesară</strong>
            <span style="color: #92400e; font-size: 0.95rem; line-height: 1.4;">
                Contul tău încă nu este verificat. Apasă pe butonul alăturat ca să primești un mail pentru verificarea contului!
            </span>
        </div>

        <a asp-page="/User/EmailConfirmare" style="background-color: #f59e0b; color: #ffffff; padding: 0.75rem 1.5rem; border-radius: var(--radius); text-decoration: none; font-weight: 600; font-size: 0.95rem; box-shadow: 0 1px 2px rgba(0,0,0,0.05); white-space: nowrap;">
            Trimite mail de verificare
        </a>

    </div>
}